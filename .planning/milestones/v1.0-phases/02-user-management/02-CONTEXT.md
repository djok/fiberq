# Phase 2: User Management - Context

**Gathered:** 2026-02-21
**Status:** Ready for planning

<domain>
## Phase Boundary

Админите управляват пълния жизнен цикъл на потребителите от WebUI — без да пипат Kanidm конзолата. Включва: списък, създаване, деактивиране/реактивиране, смяна на роля, ресет на парола. Управление на проекти и присвояване е Phase 3.

</domain>

<decisions>
## Implementation Decisions

### Списък с потребители
- Data table (гъста таблица), пасващ на data-dense стила от Phase 1
- Колони: Име, Email, Роля, Статус, Последно влизане, Действия (бутони)
- Текстово търсене по име/email + dropdown филтри за роля и статус (активен/неактивен)
- Pagination — очакват се 50–200 потребителя в системата
- Деактивирани потребители: затъмнен ред + червен badge "Неактивен"

### Създаване на потребител
- Модален диалог (от бутон "Нов потребител" над таблицата)
- Полета: Име (username), Display name, Email, Телефон (по избор), Роля(и)
- Множество роли — потребител може да има повече от 1 роля (Admin, PM, Designer, Field Worker)

### Детайлна страница и действия
- Комбинация: бързи действия от таблицата + детайлна страница /users/:id при клик на ред
- Детайлна страница показва: профилни данни, роли, статус, действия, секция за присвоени проекти (placeholder до Phase 3)
- Claude разпределя кои действия са в таблицата (dropdown/бутони) и кои в детайлната страница

### Обратна връзка и потвърждения
- Confirmation dialog за деструктивни действия (деактивиране, ресет на парола)
- Билингвални съобщения (БГ/EN) — всички диалози, бутони, нотификации са преведени на двата езика

### Claude's Discretion
- Post-creation flow: временна парола или имейл покана — спрямо възможностите на Kanidm API
- Разпределение на действия между таблица и детайлна страница
- Notification pattern (toast, inline, или комбинация)
- Error handling при Kanidm API грешки (дупликат, мрежов проблем)
- Exact pagination размер и стил

</decisions>

<specifics>
## Specific Ideas

- Проектна секция в детайлната страница на потребител — подготовка за Phase 3 (показва placeholder "Проектите ще бъдат налични след Phase 3")
- Затъмнен ред + badge за неактивни потребители — визуално ясна разлика без скриване

</specifics>

<deferred>
## Deferred Ideas

None — discussion stayed within phase scope

</deferred>

---

*Phase: 02-user-management*
*Context gathered: 2026-02-21*
